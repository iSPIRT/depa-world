"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4728],{1973:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return d},toc:function(){return c},default:function(){return u}});var i=a(7462),n=a(3366),r=(a(7294),a(3905)),l=["components"],o={id:"differential_privacy",title:"Differential Privacy",description:"Differential Privacy"},s="Differentially Private Training",d={unversionedId:"differential_privacy",id:"differential_privacy",title:"Differential Privacy",description:"Differential Privacy",source:"@site/internal/training/differential_privacy.md",sourceDirName:".",slug:"/differential_privacy",permalink:"/training/differential_privacy",editUrl:"https://github.com/iSPIRT/depa/edit/main/internal/training/differential_privacy.md",tags:[],version:"current",lastUpdatedAt:1692366778,formattedLastUpdatedAt:"8/18/2023",frontMatter:{id:"differential_privacy",title:"Differential Privacy",description:"Differential Privacy"},sidebar:"training",previous:{title:"Confidential Clean Rooms Specifications",permalink:"/training/confidential_clean_room_specifications"},next:{title:"Workflows",permalink:"/training/workflows"}},c=[{value:"Differential Privacy",id:"differential-privacy",children:[],level:2},{value:"Differential Private Training",id:"differential-private-training",children:[],level:2},{value:"Differential Private Training/Fine-tuning in DEPA",id:"differential-private-trainingfine-tuning-in-depa",children:[],level:2},{value:"Privacy Budget Management",id:"privacy-budget-management",children:[{value:"Global vs TDC-specific budget allocation",id:"global-vs-tdc-specific-budget-allocation",children:[],level:3}],level:2}],p={toc:c};function u(e){var t=e.components,a=(0,n.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"differentially-private-training"},"Differentially Private Training"),(0,r.kt)("p",null,"Imagine a TDC who wants to train a model for detecting payment fraud. The could do this by collecting labelled transaction data from multiple payment companies. The trained model might be quite useful, but it could also reveal a lot of information about the transactions, even if the TDC only has access to the trained model. Other kinds of models have been shown to be potentially vulnerable; credit card numbers have been pulled out of language models and actual faces reconstructed from image models. "),(0,r.kt)("p",null,"The DEPA training framework supports model training using a robust approach based on ",(0,r.kt)("a",{parentName:"p",href:"https://desfontain.es/privacy/differential-privacy-awesomeness.html"},(0,r.kt)("em",{parentName:"a"},"differential privacy")),". "),(0,r.kt)("h2",{id:"differential-privacy"},"Differential Privacy"),(0,r.kt)("p",null,"At its roots, differential privacy is a mathematical way to protect individuals when their data is used in datasets. DP allows high level trends and patterns within the dataset to be shared while withholding information about individuals. It guarantees that adversaries cannot discover an individual within the protected data set even by comparing the data with other datasets. In other words, an individual will experience no difference whether they participate in information collection or not. This means that ",(0,r.kt)("strong",{parentName:"p"},"no harm will come to the participant as a result of providing data"),". "),(0,r.kt)("p",null,"Differential privacy works by introducing a privacy loss or privacy budget parameter, often denoted as epsilon (\u03b5), to the dataset. \u03b5 controls how much noise or randomness is added to the raw dataset. The added randomness is controlled, therefore, the resulting dataset is still accurate enough to generate aggregate insights through data analysis while maintaining the privacy of individual participants."),(0,r.kt)("h2",{id:"differential-private-training"},"Differential Private Training"),(0,r.kt)("p",null,"There are several ways of training machine learning models with differential privacy. By far the most common is using Differentially Private Stochastic Gradient Descent (DP-SGD). DP-SGD prevents the model from memorizing or leaking sensitive information about the data by adding noise to the gradients during the optimization process. The amount of noise is carefully calibrated to satisfy a mathematical definition of differential privacy, which guarantees that the model's output is almost independent of any single data point. DP-SGD can be applied to various types of models, such as deep neural networks, and has been used for tasks such as natural language processing and computer vision.  DP-SGD can be applied to fine-tune models while preserving the privacy of the task-specific data. "),(0,r.kt)("p",null,"Here are some references that explain DP-SGD in more detail:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://medium.com/pytorch/differential-privacy-series-part-1-dp-sgd-algorithm-explained-12512c3959a3"},"Differential Privacy Series | DP-SGD Algorithm Explained"),": This blog post provides a gentle introduction to DP-SGD and its core concepts, such as clipping and noise addition."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://mukulrathi.com/privacy-preserving-machine-learning/deep-learning-differential-privacy/"},"Deep Learning with Differential Privacy (DP-SGD Explained)"),": This article gives a more formal definition of differential privacy and shows how DP-SGD can be implemented using PyTorch."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://arxiv.org/abs/2107.14586"},"An Efficient DP-SGD Mechanism for Large Scale NLP Models"),": This paper presents an efficient implementation of DP-SGD for fine-tuning large-scale NLP models based on LSTM and transformer architectures.")),(0,r.kt)("h2",{id:"differential-private-trainingfine-tuning-in-depa"},"Differential Private Training/Fine-tuning in DEPA"),(0,r.kt)("p",null,"The DEPA training framework provides TDPs with mechanisms to ensure that TDCs use their datasets in a way that protects the privacy of data principals. Using these mechanisms, TDPs can meet compliance requirements "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"TDPs create anonymized datasets by using standard de-identification approaches such as k-anonymity, masking and scrubbing as defined by the TSO. In addition, TDPs allocate a privacy budget for each dataset based on recommendations of the TSO. The privacy budget bounds the information a TDC can learn about de-identified records in the dataset. "),(0,r.kt)("li",{parentName:"ul"},"When TDPs and TDCs sign contracts, they allocate a certain fraction of the privacy budget for each training run. This is specified in the privacy constraint in the contract. "),(0,r.kt)("li",{parentName:"ul"},"When a CCR is created to train a model, it requests data encryptions keys from the TDP. The TDP SHALL NOT release keys to the CCR if the privacy budget has been exhausted. "),(0,r.kt)("li",{parentName:"ul"},"In the CCR, models SHALL Be trained using a differentially private training algorithm subject to privacy constraints specified in the contracts. For example, if a model is trained using DP-SGD, the clipping norm and noise shall be chosen based on privacy constraints. ")),(0,r.kt)("h2",{id:"privacy-budget-management"},"Privacy Budget Management"),(0,r.kt)("p",null,"In any differentially private mechanism, processing a dataset e.g., to train a model, consumes some privacy budget. The dataset cannot be used anyone once the allocated budget is exhausted. Therefore, privacy budget is a scarce resource that must be carefully managed. The DEPA training framework will provide TDPs and TDCs with guidance and tools to manage privacy budget correctly and judiciously. "),(0,r.kt)("h3",{id:"global-vs-tdc-specific-budget-allocation"},"Global vs TDC-specific budget allocation"),(0,r.kt)("p",null,"TDPs may assign a privacy budget to each TDC, under the assumption that TDCs can be consistently identified over time, and that TDCs do not collude e.g., by sharing their models with each other. Using DIDs and registration time checks addresses the first concern. Addressing advertent or inadvertent TDC collusion (e.g., due to a merger) is harder to address. "),(0,r.kt)("p",null,"We recommend that TDPs employ the following graded budget allocation policies to address this concern. "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Sensitivity Level"),(0,r.kt)("th",{parentName:"tr",align:null},"Data Privacy Sensitivity"),(0,r.kt)("th",{parentName:"tr",align:null},"Solution"),(0,r.kt)("th",{parentName:"tr",align:null},"Notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Level 0"),(0,r.kt)("td",{parentName:"tr",align:null},"Non-sensitive or aggregate data. Large amount of data is available for training and more data keeps getting generated continuously"),(0,r.kt)("td",{parentName:"tr",align:null},"Only legal protection"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("ul",null,"Least restrictive for TDCs"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Level 1"),(0,r.kt)("td",{parentName:"tr",align:null},"Highly sensitive data. Also the speed at which more such data gets generated is not too slow."),(0,r.kt)("td",{parentName:"tr",align:null},"Renewable Global Privacy Budget"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("ul",null,(0,r.kt)("li",null," No restrictions in taking the model out "),(0,r.kt)("li",null," \u201dOld\u201d training data is continuously replaced with \u201cnew\u201d training data to ensure privacy ")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Level 2"),(0,r.kt)("td",{parentName:"tr",align:null},"Highly sensitive data which is critical for larger social good. Also the speed at which more such data gets generated is slow"),(0,r.kt)("td",{parentName:"tr",align:null},"Restrict trained model use to CCR, i.e. the trained model never leaves CCR"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("ul",null,(0,r.kt)("li",null," Makes collusion harder"),(0,r.kt)("li",null," Restricted participation but still better than no access to rare critical training data")))))),(0,r.kt)("p",null,"The choice of budget allocation policy depends on the privacy sensitivity of the data. This will be a critical responsibility of SROs to agree upon the right level for each domain and dataset to best reflect the trade-offs between privacy of the data and the criticality of the use-cases for which the data is used."))}u.isMDXComponent=!0},3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return f}});var i=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=i.createContext({}),d=function(e){var t=i.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=d(e.components);return i.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=d(a),f=n,h=u["".concat(s,".").concat(f)]||u[f]||p[f]||r;return a?i.createElement(h,l(l({ref:t},c),{},{components:a})):i.createElement(h,l({ref:t},c))}));function f(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,l=new Array(r);l[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,l[1]=o;for(var d=2;d<r;d++)l[d]=a[d];return i.createElement.apply(null,l)}return i.createElement.apply(null,a)}u.displayName="MDXCreateElement"}}]);