<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="search" type="application/opensearchdescription+xml" title="DEPA World" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">Confidential Clean Room High Level Design | DEPA World</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://depa.world/training/confidential_clean_room_design"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-training-current"><meta data-react-helmet="true" property="og:title" content="Confidential Clean Room High Level Design | DEPA World"><meta data-react-helmet="true" name="description" content="Confidential Clean Room High Level Design"><meta data-react-helmet="true" property="og:description" content="Confidential Clean Room High Level Design"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://depa.world/training/confidential_clean_room_design"><link data-react-helmet="true" rel="alternate" href="https://depa.world/training/confidential_clean_room_design" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://depa.world/training/confidential_clean_room_design" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.c75abc91.css">
<link rel="preload" href="/assets/js/runtime~main.3d7bd772.js" as="script">
<link rel="preload" href="/assets/js/main.91c1b19f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_VLjY"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"></a><a class="navbar__item navbar__link" href="/"><div class="link"><div class="link__body"><div class="link__label">Home</div></div></div></a><div class="dropdown dropdown--hoverable"><a class="navbar__item navbar__link"><div class="link"><div class="link__body"><div class="link__label">Inference</div></div></div></a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/learn/about-depa/an-introduction-to-depa"><div class="link"><div class="link__body"><div class="link__label">Learn</div></div></div></a></li><li><a class="dropdown__link" href="/specification/about-spec"><div class="link"><div class="link__body"><div class="link__label">Specification</div></div></div></a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/training/depa_training_framework"><div class="link"><div class="link__body"><div class="link__label">Training</div></div></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item navbar__item--dock"><div class="toggle toggle_bWQZ toggle--disabled" role="button" tabindex="-1"><div class="toggle__icon toggle__icon--unchecked" style="font-family:Material Icons">dark_mode</div><div class="toggle__icon toggle__icon--checked" style="font-family:Material Icons">light_mode</div><input type="checkbox" class="toggle__screenreader-only" aria-label="Switch between dark and light mode"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y sidebarWithHideableNavbar_FoYL"><a tabindex="-1" class="sidebarLogo_FJUI" href="/"></a><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/training/depa_training_framework">DEPA Training Framework</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/training/depa">DEPA Training Framework Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/training/contracts">Contracts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/training/confidential_clean_room_design">Confidential Clean Rooms</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/training/confidential_clean_room_design">Confidential Clean Room High Level Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/training/confidential_clean_room_specifications">Confidential Clean Rooms Specifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/training/confidential_clean_room_dp">Differential Privacy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/training/workflows">Workflows and API specifications</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/training/reference-implementation">Getting Started</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Confidential Clean Rooms</h1><p>In the DEPA training framework, datasets are brought together and processed in secure environments known as <em>confidential clean rooms</em>. Confidential clean rooms intend to meet a set of privacy and security goals through technical measures. This includes:</p><ul><li>Prevent inappropriate access to raw data or other intermediate data through technical enforcement.</li><li>Allow TDPs to retain control over the data they&#x27;ve shared without trusting any third party. </li><li>Allow TDCs to retain control over the models they are training without trusting any third party.</li><li>Enforce constraints on data usage defined in contracts. This includes noise addition during analytics and training in line with the long-term goal of differential privacy.</li><li>Support flexible, scalable, and extensible training so that TDCs can choose when and what kinds of models they wish to train.</li><li>Provide open and transparent implementations for all infrastructure components.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="confidential-computing">Confidential Computing<a class="hash-link" href="#confidential-computing" title="Direct link to heading">â€‹</a></h2><p>Confidential clean rooms are based on novel security features for <em>confidential computing</em> available in most modern CPUs and GPUs (Intel, AMD, ARM and NVIDIA). Confidential computing can be used to create Trusted Execution Environments (TEEs) that isolate the code and data of a given task from the rest of the platform, including privileged entities such as server administrators. Therefore, the task can be trusted with private data, as hardware encryption and access control ensure it will be accessible only to the TEE code. </p><p>The second core feature of confidential computing is remote attestation: the TEE code can request the hardware to attest a given message (such as a public key), together with the digests of its binary image and configuration, measured when the TEE was created. The attestation is signed with a key unique to the CPU (stored in hardware fuses) and is backed by a public-key certificate for the plat-form (endorsed by the hardware vendor). By verifying this signature, a user can thus authenticate the TEEâ€™s code and hardware platform before trusting it with private data.</p><p>Most cloud platform support deployment of containerized workloads in TEEs. In the following, we suppose that training runs in confidential containers, such as those provided in the cloud by AWS, GCP and Azure.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="training-workflow">Training Workflow<a class="hash-link" href="#training-workflow" title="Direct link to heading">â€‹</a></h2><p>In the DEPA training framework, TDCs employ confidential clean rooms to train their models on datasets based on contracts signed with TDPs and registered with the contract service. The overall training workflow is as follows. </p><ul><li><p>TDC provides the CCR provider with a description of the model they wish to train, including signed contracts permitting the TDC to access the datasets required for training. </p></li><li><p>In preparation for the training job, the CCR provider may download and cache encrypted datasets into their own local storage. This is purely for efficiency as the CCR provider will not be able to decrypt the datasets. </p></li><li><p>CCR provider creates a confidential clean room using SRO certified code. </p></li><li><p>During launch, the CCR verifies authenticity and validity of contracts. The CCR terminates if any of the provided contracts are not correctly signed (e.g., if the identities of the signers have expired) or no longer valid (e.g., have been revoked). </p></li><li><p>CCR use a key release protocol to obtain data and model encryption keys from key management services hosted by TDPs. As part of the key release protocol, CCR SHOULD provide attestation evidence to the key management service. Evidence MAY include raw attestation reports along with certificates issued by the hardware manufacturer OR attestation tokens issued by an attestation service. </p></li><li><p>Key management services independently verify evidence against key release policies configured by the TDP, perform additional book keeping (such as track privacy budgets), and release data encryption keys securely to the CCR. </p></li><li><p>CCR uses encryption keys to decrypt the datasets and model. The CCR ensures that decrypted models and datasets are appropriately protected from the hosting platform, including the CCR provider.</p></li><li><p>The datasets may be pre-processed within the CCR e.g., aggregate or join as long as the operations are permitted by contracts. </p></li><li><p>The CCR loads the model and trains the model on the pre-processed dataset as per the model configuration. The CCR may partition the dataset into train and test dataset as per TDC requirements. Training must meet all constraints specified in the respective contracts. For example, CCR must use certified training algorithm to inject appropriate noise in the model weights so as to stay within the privacy budget allocated for each dataset. </p></li><li><p>During the training process, the CCR may notify the contract service. </p></li><li><p>After training is complete, the CCR makes the trained model available to the TDC along with metrics such as loss and accuracy on the validation dataset.</p></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/iSPIRT/depa/edit/main/internal/training/confidential_clean_room_design.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-08-04T15:28:52.000Z">8/4/2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/training/payments"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Payment Flows</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/training/confidential_clean_room_specifications"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Confidential Clean Rooms Specifications</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#confidential-computing" class="table-of-contents__link toc-highlight">Confidential Computing</a></li><li><a href="#training-workflow" class="table-of-contents__link toc-highlight">Training Workflow</a></li></ul></div></div></div></div></main></div></div><footer class="footer padding--none"><div class="container"><div class="row footer__links padding-vert--xl"><div class="col footer__col"><h4 class="footer__title">LEARN</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/learn/about-depa/an-introduction-to-depa">About DEPA</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/consent-artefact">Consent Artefact</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/networks/ecosystem-and-network">Networks</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/glossary">Glossary</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">SPECIFICATION</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/specification/about-spec">About APIs and Flows</a></li><li class="footer__item"><a class="footer__link-item" href="/specification/entity-resolution">Entity Resolution</a></li><li class="footer__item"><a class="footer__link-item" href="/training/specification/data-provider-discovery">Data Provider Disovery</a></li><li class="footer__item"><a class="footer__link-item" href="/specification/mtls-establishment">Mutual TLS Establishment</a></li><li class="footer__item"><a class="footer__link-item" href="/specification/linking/linking-flow">Linking</a></li><li class="footer__item"><a class="footer__link-item" href="/specification/flows/consent-flow">Flows</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">TRAINING</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/training/depa_training_framework">DEPA Training Framework</a></li><li class="footer__item"><a class="footer__link-item" href="/training/depa">DEPA Training Framework Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/training/contracts">Contracts</a></li><li class="footer__item"><a class="footer__link-item" href="/training/confidential_clean_room_design">Confidential Clean Rooms</a></li><li class="footer__item"><a class="footer__link-item" href="/training/workflows">Workflows and API specifications</a></li><li class="footer__item"><a class="footer__link-item" href="/training/reference-implementation">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/depa-world/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus</a></li><li class="footer__item"><a href="https://wiki.iota.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">IOTA Wiki</a></li></ul></div></div><div class="footer__bottom padding-bottom--xl"><div class="footer__copyright">2023 DEPA Global. Built with Docusaurus, using the IOTA Wiki template.</div></div></div><div class="social"></div></footer></div>
<script src="/assets/js/runtime~main.3d7bd772.js"></script>
<script src="/assets/js/main.91c1b19f.js"></script>
</body>
</html>