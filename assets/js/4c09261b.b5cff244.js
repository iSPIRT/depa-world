"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1550],{7850:function(t,e,n){n.r(e),n.d(e,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return f}});var i=n(7462),r=n(3366),o=(n(7294),n(3905)),a=["components"],l={id:"cm-init-link",title:"CM Inititated",description:"CM Initiated Linking flow"},s=void 0,c={unversionedId:"linking/cm-init-link",id:"linking/cm-init-link",title:"CM Inititated",description:"CM Initiated Linking flow",source:"@site/internal/specification/linking/cm-init-link.md",sourceDirName:"linking",slug:"/linking/cm-init-link",permalink:"/specification/linking/cm-init-link",editUrl:"https://github.com/iSPIRT/depa/edit/main/internal/specification/linking/cm-init-link.md",tags:[],version:"current",lastUpdatedAt:1646839958,formattedLastUpdatedAt:"3/9/2022",frontMatter:{id:"cm-init-link",title:"CM Inititated",description:"CM Initiated Linking flow"},sidebar:"specification",previous:{title:"Linking Flow",permalink:"/specification/linking/linking-flow"},next:{title:"DP Inititated",permalink:"/specification/linking/dp-init-link"}},p=[],u={toc:p};function f(t){var e=t.components,l=(0,r.Z)(t,a);return(0,o.kt)("wrapper",(0,i.Z)({},u,l,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This will typically be the case when User login to his CMs account and does the discovery of the DP with whom the linking has to be initiated."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"accountLinking-CMSide",src:n(8918).Z,title:"accountLinking-CMSide",width:"525",height:"742"})),(0,o.kt)("p",null,"Details of the flow"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"As a precursor for the flow to begin Mutual TLS connection is established between the CM and DP.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"CM sends a request to the DP to initiate the linking. If the user exists then move to the next step else respond with error.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"DP initiates the authentication of the user. This is outside the DEPA flow and will be done in 3 steps.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Notification to the user that a request for linking has been received. The notification can take any form like sms, ivr, app notifications etc..")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Users might have to do the authentication, this can be single factor or multiple depending on the DP.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"User will approve the request and select the accounts which he wishes to link with the CM. The account selection will only be required if the accounts attribute is not populated by the CM.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Once the request is approved a notification from DP to the CM is followed."))),(0,o.kt)("p",null,"There is another API provided for checking the status of the linking request in the realtime. This is a sync call."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Endpoints")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"/link"))),(0,o.kt)("p",null,"Endpoint to send the linking request by the CM to the DP. This endpoint is hosted by Gateway and DP."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"/notification/link"))),(0,o.kt)("p",null,"Receive linking notification to the linking request sent earlier. This endpoint is hosted by Gateway and CM."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"/link/status"))),(0,o.kt)("p",null,"Endpoint is hosted by the DP, this is to check in realtime the status of the request sent earlier by the CM."),(0,o.kt)("p",null,"Please refer to the OpenAPI specification for details on the API and the request-response structure."))}f.isMDXComponent=!0},8918:function(t,e,n){e.Z=n.p+"assets/images/CM-init-link-1950d8b291f44cc0d80f61ab05e00afb.png"},3905:function(t,e,n){n.d(e,{Zo:function(){return p},kt:function(){return h}});var i=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var s=i.createContext({}),c=function(t){var e=i.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):a(a({},e),t)),n},p=function(t){var e=c(t.components);return i.createElement(s.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return i.createElement(i.Fragment,{},e)}},f=i.forwardRef((function(t,e){var n=t.components,r=t.mdxType,o=t.originalType,s=t.parentName,p=l(t,["components","mdxType","originalType","parentName"]),f=c(n),h=r,d=f["".concat(s,".").concat(h)]||f[h]||u[h]||o;return n?i.createElement(d,a(a({ref:e},p),{},{components:n})):i.createElement(d,a({ref:e},p))}));function h(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=n.length,a=new Array(o);a[0]=f;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l.mdxType="string"==typeof t?t:r,a[1]=l;for(var c=2;c<o;c++)a[c]=n[c];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}f.displayName="MDXCreateElement"}}]);